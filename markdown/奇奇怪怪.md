[TOC]

- 参数传二级指针的情况

- grep 打印关键字邻近几行

- 宏函数

- 类似这种

  ![image-20221010112405604](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221010112405604.png)

- markdown 下划线怎么打

- 形数为结构体指针，实参为另一个结构体

 static 定义全局static变量，该变量可以其他文件引用？





## 2022年10月12日

进程号存放文件 /var/run

wan口信息可以从cli查询嘛	　　

unsigned 范围？

ret |= (1<<WORK_MODE_V4_BIT); ？



snmpget -v 2c -c public 127.0.0.1:161 .1.3.6.1.2.1.1.3.0



查看端口状态的文件/tmp/eth.info 

查看pid  /var/run/



例如，生成可执行文件tcpserver，mp拉起，ps查询，显示进程名称为tcpserver，而snmp显示的是snmpd？syslogd的也是。

系统管理员怎么看当前用户是不是 ？

- /bin、/sbin、/usr/bin、/usr/sbin目录的区别

> /bin二进制可执行命令,/bin放置的是在单用户维护模式下还能够被操作的命令，在/bin下面的命令可以被root和一般账号使用，主要有cat，chmod，chown，cpmkdir等常用命令

> /sbin系统管理命令，这里存放的是系统管理员使用的管理程序,sbin 下的命令属于系统命令lsmod，arp等，/bin,/sbin目录是在系统启动后挂载到根文件系统中的，

>  /usr/sbin存放的是一些用户命令， 是你在后期安装的一些软件的运行脚本。 /usr/sbin  放置一些用户安装的系统管理的必备程式，例如例如:dhcpd、httpd、imap

![image-20221012161815621](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221012161815621.png)

端口信息文件   /tmp/eth.info

![image-20221014094038383](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221014094038383.png)

这里表示的是物理连接状态，即网线连接。与eth0有没有显示是有区别的

![image-20221014094202309](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221014094202309.png)



## 2022年10月13日

.1.3.61.4.1.31981.3.3.3.1.1.9

目前/tmp目录只有 LAN的文件，此时LAN是连接状态，有此文件是正常的，

但WAN也是连接状态，但是没有WAN文件，也其他的有点难验证，

验证modem，没有sim卡

拨上号后，有/tmp/snmpModemOld.status文件，mib能查询，状态connnected;

拔卡：mib查不到信息，/tmp/snmpModemOld.status还存在，我觉得Old的意思是之前的状态信息，所以文件存在合理，经过实验，重启设备后，文件消失，

我猜测的是如果mib是从这些接口读取信息，但实际是文件存在，但是mib已经读不了信息了，难道猜测错了，不是从这些文件读取的？

![image-20221013103144801](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013103144801.png)

此处除了WAN其他都有定义，但mib上显示的是6个，定义只有其中5个

![image-20221013103618166](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013103618166.png)

![image-20221013103643938](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013103643938.png)

在看状态时，路由器的WAN口如果是断开网线，是查不到信息的,modem的是没有sim卡，禁用modem都不会显示，其他的没有连接没有显示；

那什么时候会显示disconnect呢，路由器WAN口一侧连接网线，另一端网线断开网线，connnected，

- WAN

  - 是否能查询WAN信息

    - 把WAN口模式切成LAN口：

      ![image-20221013171634887](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013171634887.png)

      - 把WAN口down掉，mib查询不了

        >ifconfig eht0 down/up

        

        down之前：
  
        ![image-20221013192538258](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013192538258.png)
  
        down之后：eth0 消失
  
        ![image-20221013192456048](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013192456048.png)
  
        ![image-20221013192714726](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013192714726.png)
  
        ```c
        WAN状态的获取：
            ioctl(socket fd, SIOCGIFFLAGS,IFF_UP )
            IFF_UP 获取网口的开关状态，开关的实现：ifconfig eht0 down/up
        ```
  
        
  
        
  
    - 其他状态都能正常查询
  
    ![](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013103743741.png)
  
  - 正常查询
  
    - 不管网线是否连接，都能获取到信息。
    
    







- H8951信号灯信息

>电源灯  接通电源常亮
>
>拨号等 正在拨号灯一直闪，拨号成功灯常亮
>
>信号灯  信号弱灯一直闪
>
>wifi灯 



有点帮助，找到代码位置

![image-20221013111240689](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013111240689.png)

SIOCSIFFLAGS读取 或 设置 设备的 活动标志字. 包含 下列值 的 屏蔽位

 ifr_flags 包含 下列值 的 屏蔽位:

IFF_UP 接口正在运行.

IFF_BROADCAST 有效的广播地址集.

IFF_DEBUG 内部调试标志.

IFF_LOOPBACK 这是自环接口.

IFF_POINTOPOINT 这是点到点的链路接口.

IFF_RUNNING 资源已分配.

IFF_NOARP 无arp协议, 没有设置第二层目的地址.

IFF_PROMISC 接口为杂凑(promiscuous)模式.

IFF_NOTRAILERS 避免使用trailer .

IFF_ALLMULTI 接收所有组播(multicast)报文.IFF_MASTER 主负载平衡群(bundle).

IFF_SLAVE 从负载平衡群(bundle).

IFF_MULTICAST 支持组播(multicast).

IFF_PORTSEL 可以通过ifmap选择介质(media)类型.

IFF_AUTOMEDIA 自动选择介质.

IFF_DYNAMIC 接口关闭时丢弃地址.

![image-20221013142443199](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013142443199.png)

IFF_UP和IFF_RUNNING有什么区别

`IFF_RUNNING`应该反映网络接口上的*操作*状态,而不是其管理状态.举例来说,`UP`管理员可以提供以太网接口(例如`ifconfig eth0 up`),但`RUNNING`如果没有插入电缆,则不会将其视为可操作的(即根据RFC2863).

要检查以太网电缆是否确实连接到网络，应检查IFF_RUNNIG。IFF_UP表示系统为接口分配了资源。

示网络的物理连接已就绪，即网线连接正常.

就实际功用而言，两者都代表了网络装置是否正常启用，但是更仔细观察可以发现拔除网络线时会造成 IFF_RUNNING 的改变，至于 IFF_UP 不会因插拔网络线而有任何变化。

![image-20221013195828666](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221013195828666.png)



- union联合体

disconnect 是怎样的情况下的？



data_read_wan -> wanTable_load -> initialize_table_wanTable -> init_wan ->should_init("wan") 

## 2022年10月14日

![image-20221014112104007](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221014112104007.png)

- 使用桌面的syslog老是无响应，以前使用正常，后来用抓log工具中的syslog才能运行，原来缺少了一个bin文件

![image-20221014172739559](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221014172739559.png)

![image-20221014172913845](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221014172913845.png)

- WAN模式有三种，静态能上网吗，能啊，跟dhcp同理的，只是获取的方式不一样，一个自动，一个手动

静态IP由网络运营公司提供（联通、移动、电信等），其中也包括子网掩码、网关、DNS服务器等



## 2022年10月17日

ping -c 4 8.8.8.8

eth0 wan

1 int check_by_icmp(char *src, char *dst, int sec)

![image-20221017151818626](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221017151818626.png)

//1 int send_icmp_pack(int sockfd, const char *dst_ip, int len)

2 static int general_check_link(void *p, LB_UPDATE_FUNC f)

![image-20221017151903010](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221017151903010.png)

![image-20221017142656209](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221017142656209.png)

3 

![image-20221017142508981](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221017142508981.png)

4 

![image-20221017152635919](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221017152635919.png)

![image-20221017142524768](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221017142524768.png)



ret应返回0为success,成功写入，即写入的都是成功，

指针操作。。

static int lb_ctrl_check_main(lb_rule_t *rule)

rule name:  0  interface: eth0  status: 0 

/tmp linkbackup.info

1 需求评估，还需要技术支持那边确认：disconnect的判断装填是通过链路备份还是ipRouterNetHop信息判断。

2 ipRouterNetHop的信息对应静态路由表。当以下情况时成立时，通过此值可判断wan链路的连接状态：wan模式为DHCP，当wan物理链路断开时，前后对比少一条路由，从mib查询有延迟；但当wan模式为static，ipRouterNetHop值没有变化。



## 2022年10月18日

![image-20221018111050265](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221018111050265.png)

## 2022年10月21日





![image-20221021094432540](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221021094432540.png)



### 2022年10月25日

#### 1  md5sum

md5sum是linux 下的shell命令 ，其功能是计算检验MD5效验码

一般认为MD5码可以唯一地代表原信息的特征，通常用于密码的加密存储，数字签名，文件完整性验证等。

通过对比同一文件的MD5码，来校验这个文件是否被篡改过

![image-20221025105911428](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221025105911428.png)

### 2 cp  

 -f  强制覆盖

inux命令的cp -r和-R的区别为：复制不同、覆盖不同、识别依据不同。

　　1、复制不同

　　-r：既复制当前目录下的文件，也复制当前目录下的文件夹。

　　-R：只复制当前目录下的文件，不复制当前目录下的文件夹。

　　2、覆盖不同

　　-r：含文件的文件夹会覆盖不含文件的同名文件夹，文件也会覆盖。

　　-R：不会覆盖含内容的文件夹，但是会覆盖同名的空文件。

　　3、识别依据不同

　　-r：不以文件后缀名作为识别依据。

　　-R：以文件后缀名作为识别依据。





# 2022年10月26日

C++中的var类型不同于其他的常见类型，其他的类型例如int、float、char等类型需要自己知道数据的类型，再根据需要定于，而var类型可以根据你赋值的类型来确定变量的类型：例如： var a = 10，则a是整形、var b = “abc”，则b是字符型、var c = 6.66，则c是浮点型。使用var时需要注意以下事项：
1、必须在定义时初始化，如：var a；a = 1；这样是错误的

2、初始化完成之后，不能再给变量赋予与初始化不同的变量

3、var类型的变量必须是局部变量
